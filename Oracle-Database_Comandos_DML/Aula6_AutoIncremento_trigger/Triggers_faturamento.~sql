--INSERE A NOTA
INSERT INTO TINA_TB_NOTAS_FISCAIS (NUMERO, DATA_VENDA, CPF, MATRICULA, IMPOSTO)
VALUES('004', to_date('2022-01-02', 'yyyy-mm-dd'), '1471156710', '00235', 0.10);

--INSERE O ITEM
INSERT INTO TINA_TB_ITENS_NOTAS_FISCAIS (NUMERO, CODIGO_DO_PRODUTO, QUANTIDADE, PRECO) 
VALUES ('004','1000889',18,21.10);

--DEPOIS DE INCLUIR O ITEM 004 DEVERÁ DELETAR A TABELA
--ATUALIZAR AS INFORMAÇÕES
DELETE FROM TINA_TB_FATURAMENTO;
INSERT INTO TINA_TB_FATURAMENTO
(SELECT nf.data_venda, 
  SUM(itn.quantidade * itn.preco) AS faturamento 
  FROM TINA_TB_NOTAS_FISCAIS nf 
  INNER JOIN TINA_TB_ITENS_NOTAS_FISCAIS itn 
  ON nf.numero = itn.numero 
  GROUP BY nf.data_venda);

CREATE TRIGGER TG_TINA_TB_FATURAMENTO
AFTER INSERT ON TINA_TB_ITENS_NOTAS_FISCAIS
BEGIN
  DELETE FROM TIN  
